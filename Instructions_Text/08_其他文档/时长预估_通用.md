# 视频时长预估分析

**对应代码版本**：通用（适用于所有版本）  
**文档编号**：通用

## 字幕时长计算规则（来自 utils.py）
- 基础时长：`len(text) * 0.12` 秒
- 复杂关键词加成：包含 ["导数", "泰勒", "算子", "卷积", "离散", "连续", "微积分", "误差", "抵消"] 每个 +0.3 秒
- 最终时长：限制在 2.0 到 6.0 秒之间
- 字幕显示流程：clear(0.4s) + FadeIn(0.6s) + 显示时长 + wait_after

---

## Scene 0: Scene0Intro（开场谜题）

| 操作 | 时长(s) | 说明 |
|------|---------|------|
| FadeIn(pair_group) | 1.2 | 清晰图vs噪声图 |
| hud.show("在噪声里，仅凭数学，如何找到清晰的轮廓？") | 3.3 | 15字×0.12=1.8s，无关键词，+wait_after 1.5s |
| FadeIn(question_group) | 0.8 | 问题文本 |
| wait | 1.6 | 定格 |
| FadeOut(question_group) | 0.6 | |
| hud.clear() | 0.4 | 淡出字幕 |
| FadeOut(pair_group) | 0.8 | |
| wait | 0.4 | |
| **小计** | **9.1** | |

---

## Scene 1: Scene1Discrete（连续→离散）

| 操作 | 时长(s) | 说明 |
|------|---------|------|
| Create(axes) | 1.0 | |
| Create(curve) | 1.2 | |
| hud.show("在连续世界里，导数是切线的斜率。") | 2.66 | 13字×0.12=1.56s，含"导数"+0.3s=1.86s，+wait_after 0.8s |
| 切线动画 (t.animate) | 2.8 | |
| wait | 0.6 | |
| hud.show("但在数字世界，Δx 无法趋近 0，切线消失。") | 3.36 | 18字×0.12=2.16s，无关键词，+wait_after 1.2s |
| 采样动画 | 1.6 | FadeIn samples, FadeOut tangent |
| hud.show("最小步长是 1 个像素，我们失去了极限。") | 3.36 | 18字×0.12=2.16s，无关键词，+wait_after 1.2s |
| Create(box, dx_line, dx_label) | 1.2 | |
| 放大特写动画 | 1.8 | scale + FadeIn question |
| wait | 1.8 | |
| hud.clear() | 0.4 | |
| FadeOut(cluster, q_group) | 1.0 | |
| wait | 0.3 | |
| **小计** | **22.92** | |

---

## Scene 2: Scene2Taylor（泰勒抵消→中心差分）

| 操作 | 时长(s) | 说明 |
|------|---------|------|
| hud.show("前向与后向的斜率各有偏差，如何消掉误差？") | 2.96 | 18字×0.12=2.16s，含"误差"+0.3s=2.46s，+wait_after 0.8s（含clear 0.4s） |
| Create(axes, graph) | 1.2 | |
| wait | 0.3 | |
| Create(forward_line) + Write(fwd_label) | 1.0 | |
| Create(backward_line) + Write(bwd_label) | 1.0 | |
| wait | 0.5 | |
| hud.show("前向与后向各有系统误差：奇偶阶项混在一起。") | 3.16 | 20字×0.12=2.4s，含"误差"+0.3s=2.7s，+wait_after 1.0s（含clear 0.4s） |
| Create(fx_error) | 1.0 | |
| wait | 0.5 | |
| Create(fdd_error) | 0.8 | |
| wait | 0.4 | |
| Write(right_tex) | 1.2 | |
| Write(left_tex) | 1.2 | |
| wait | 0.4 | |
| hud.show("右减左：偶数阶互相抵消，留下更纯净的一阶导。") | 3.36 | 20字×0.12=2.4s，含"抵消"+"导数"+0.6s=3.0s，+wait_after 1.2s（含clear 0.4s） |
| Create(fx_rect) | 0.8 | |
| wait | 0.3 | |
| f(x)符号飞向动画 | 1.0 | |
| apply_wave_effect | 0.6 | |
| FadeOut(error_group_fx) | 0.4 | |
| wait | 0.5 | |
| Create(fdd_rect) | 0.8 | |
| wait | 0.3 | |
| f''(x)符号飞向动画 | 1.0 | |
| apply_wave_effect | 0.6 | |
| FadeOut(error_group_fdd) | 0.4 | |
| wait | 0.6 | |
| TransformMatchingTex | 1.8 | |
| wait | 0.8 | |
| Write(coeff) + Create(f_prime_highlight) | 1.2 | |
| wait | 1.0 | |
| FadeOut(f_prime_highlight) | 0.6 | |
| wait | 0.5 | |
| hud.show("中心差分：用三点近似导数，误差仅剩二阶。") | 3.66 | 18字×0.12=2.16s，含"导数"+"误差"+0.6s=2.76s，+wait_after 1.5s（含clear 0.4s） |
| wait | 0.6 | |
| FadeOut(...) | 1.0 | |
| hud.clear() | 0.4 | |
| wait | 0.3 | |
| **小计** | **36.96** | |

---

## Scene 3: Scene3SobelConstruct（Sobel 诞生）

| 操作 | 时长(s) | 说明 |
|------|---------|------|
| hud.show("直接微分会放大噪声，先看一段\"带噪信号\"。") | 2.96 | 18字×0.12=2.16s，无关键词，+wait_after 0.8s（含clear 0.4s） |
| Create(axes) | 0.8 | |
| Create(noisy_graph) | 1.2 | |
| FadeIn(clean_graph) | 0.8 | |
| wait | 0.4 | |
| hud.show("套上纯微分核 [-1,0,1]：噪声被一并放大。") | 3.16 | 18字×0.12=2.16s，无关键词，+wait_after 1.0s（含clear 0.4s） |
| FadeIn(diff_group) | 0.8 | |
| wait | 0.6 | |
| Create(diff_axes, grad_graph) | 1.2 | |
| apply_wave_effect | 0.8 | |
| wait | 0.5 | |
| hud.show("先平滑，再微分：用 [1,2,1]^T 做低通，再用 [-1,0,1] 做高通。") | 3.56 | 26字×0.12=3.12s，含"微分"+0.3s=3.42s，+wait_after 1.4s（含clear 0.4s） |
| FadeIn(smooth_group) | 0.8 | |
| wait | 0.4 | |
| hud.show("平滑核滑过信号：窗口内的点被加权平均拉平。") | 3.36 | 20字×0.12=2.4s，无关键词，+wait_after 1.2s（含clear 0.4s） |
| 平滑窗口滑动动画 | 4.0 | window_tracker + blend_tracker |
| wait | 0.8 | |
| hud.show("平滑后，噪声被抑制，信号结构更清晰。") | 3.36 | 18字×0.12=2.16s，无关键词，+wait_after 1.2s（含clear 0.4s） |
| noisy_graph.animate + FadeOut(window_rect) | 0.8 | |
| wait | 0.6 | |
| Write(multiply, equal) + FadeIn(sobel_matrix) | 1.4 | |
| Transform(...) | 0.001 | 可忽略 |
| wait | 0.8 | |
| hud.show("Sobel = 平滑 × 微分：一手抓稳，一手抓变。") | 3.56 | 20字×0.12=2.4s，含"微分"+0.3s=2.7s，+wait_after 1.4s（含clear 0.4s） |
| wait | 0.6 | |
| Create(rect) | 0.8 | |
| wait | 2.0 | 定格展示 |
| FadeOut(...) | 1.0 | |
| hud.clear() | 0.4 | |
| wait | 0.3 | |
| **小计** | **35.996** | |

---

## Scene 4: Scene4Vision（3D 扫描）

| 操作 | 时长(s) | 说明 |
|------|---------|------|
| hud.show("把亮度映射为高度，图像变成 3D 地形。") | 3.96 | 18字×0.12=2.16s，无关键词，+wait_after 1.8s（含clear 0.4s） |
| FadeIn(axes3d, surface) | 2.6 | |
| wait | 1.0 | |
| hud.show("用滑动窗口扫描：窗口颜色随梯度大小而变。") | 3.96 | 20字×0.12=2.4s，无关键词，+wait_after 1.8s（含clear 0.4s） |
| 扫描动画 (scan_tracker) | 12.0 | 主要动画 |
| wait | 3.0 | |
| FadeOut(scanner_group, hud_group, graph, dot) | 1.4 | |
| hud.clear() | 0.4 | |
| FadeOut(axes3d, surface) | 1.2 | |
| wait | 0.6 | |
| **小计** | **29.72** | |

---

## Scene 4.5: Scene4_5Applications（应用对照）

| 操作 | 时长(s) | 说明 |
|------|---------|------|
| hud.show("看看现实画面：左侧原图，右侧边缘提取。") | 3.76 | 18字×0.12=2.16s，无关键词，+wait_after 1.6s（含clear 0.4s） |
| FadeIn(pair) | 1.6 | |
| wait | 3.0 | |
| hud.show("Sobel 把结构凸显出来：道路边界、文字笔画更清晰。") | 4.16 | 24字×0.12=2.88s，无关键词，+wait_after 2.0s（含clear 0.4s） |
| wait | 2.0 | |
| FadeOut(pair) | 1.0 | |
| hud.clear() | 0.4 | |
| wait | 0.6 | |
| **小计** | **16.52** | |

---

## Scene 5: Scene5Outro（总结与片尾）

| 操作 | 时长(s) | 说明 |
|------|---------|------|
| hud.show("从连续导数到离散差分，从噪声到轮廓，我们看见了什么。") | 4.16 | 26字×0.12=3.12s，含"导数"+"离散"+"连续"+0.9s=4.02s，+wait_after 2.0s（含clear 0.4s） |
| FadeIn(recap) | 1.8 | |
| wait | 3.0 | |
| hud.show("知行合一：数学理想 Δx→0，工程现实 pixel=1。") | 4.16 | 22字×0.12=2.64s，无关键词，+wait_after 2.0s（含clear 0.4s） |
| wait | 2.0 | |
| 哲学文本动画 (Succession) | 0.8 | |
| wait | 3.0 | |
| LaggedStart(credits) | 2.2 | |
| wait | 4.0 | |
| FadeOut(recap, phil_group, credits) | 1.6 | |
| hud.clear() | 0.4 | |
| wait | 0.8 | |
| **小计** | **27.96** | |

---

## 总时长汇总

| 场景 | 时长(秒) | 时长(分:秒) |
|------|----------|-------------|
| Scene 0: 开场谜题 | 9.1 | 0:09 |
| Scene 1: 连续→离散 | 22.92 | 0:23 |
| Scene 2: 泰勒抵消 | 36.96 | 0:37 |
| Scene 3: Sobel 诞生 | 35.996 | 0:36 |
| Scene 4: 3D 扫描 | 29.72 | 0:30 |
| Scene 4.5: 应用对照 | 16.52 | 0:17 |
| Scene 5: 总结片尾 | 27.96 | 0:28 |
| **总计** | **179.176** | **约 2:59** |

---

## 结论

**预估总时长：约 3 分钟（179 秒）**

### 各场景占比：
- Scene 2（泰勒抵消）：20.6% - 最复杂，包含大量几何动画和公式推导
- Scene 3（Sobel 诞生）：20.1% - 包含平滑窗口滑动动画（4秒）
- Scene 4（3D 扫描）：16.6% - 包含长扫描动画（12秒）
- Scene 5（片尾）：15.6% - 包含回顾和片尾声明
- Scene 1（连续→离散）：12.8% - 中等复杂度
- Scene 4.5（应用对照）：9.2% - 简单展示
- Scene 0（开场）：5.1% - 最短

### 注意事项：
1. 字幕时长计算基于自动算法，实际可能因渲染速度略有差异
2. 3D 场景（Scene 4）渲染时间可能更长
3. 如果使用高质量预设，渲染时间会增加，但视频时长不变
4. 建议预留 5-10% 缓冲时间，实际时长可能在 **3:00-3:15** 之间

