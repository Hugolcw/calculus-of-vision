# 📝 迭代版本说明文档

**对应代码版本**：V01 (`sobel_iterative_v01_scene0.py` 或 `sobel_v01_basic.py`)  
**文档版本**：v1.0  
**文档编号**：V01

## 版本信息

- **版本号**: v01
- **阶段**: 第一阶段（Scene 0）
- **文件名**: `sobel_iterative_v01_scene0.py` 或 `sobel_v01_basic.py`
- **状态**: ✅ 已完成，待测试

---

## 第一阶段内容：Scene 0 - 引言与背景

### 目标
建立主题，激发观众兴趣，为后续内容做铺垫。

### 时长估算
约 **75-90秒**（含字幕显示和动画）

---

## 内容结构

### Part 1: 开场问题（约15秒）
- **字幕**: "你有没有想过，机器是如何'看见'图像的？"
- **画面**: 快速展示三个实际应用（自动驾驶、人脸识别、医疗影像）
- **目的**: 引起观众兴趣

### Part 2: 核心概念引入（约20秒）
- **字幕**: "今天，我们将探索一个看似简单的问题：如何检测图像的边缘？"
- **画面**: 展示一张模拟图像，边缘被高亮显示
- **字幕**: "这背后，隐藏着微积分的深刻智慧"
- **目的**: 明确主题，建立核心问题

### Part 3: 主题预告（约15秒）
- **字幕**: "从数学的理想世界，到工程的实际应用"
- **画面**: 快速预览关键场景（连续函数、离散采样、Sobel矩阵）
- **目的**: 预告视频内容，建立期待

### Part 4: 背景知识铺垫（约30秒）
- **字幕**: "在数学分析中，导数告诉我们函数的变化率"
- **画面**: 展示导数的直观例子（位移-速度）
- **字幕**: "但在数字图像中，一切都是离散的像素"
- **画面**: 展示连续图像到离散像素的转换过程
- **目的**: 建立数学背景，解释核心矛盾

### Part 5: 过渡（约5秒）
- **字幕**: "让我们从数学的理想世界开始"
- **目的**: 自然过渡到 Scene 1

---

## 技术特点

### 1. 字幕管理系统（SubtitleManager）

**特点**:
- ✅ 自动计算字幕显示时长（基于文本长度）
- ✅ 平滑的字幕切换（使用 `ReplacementTransform`）
- ✅ 统一的样式（位置、颜色、背景）
- ✅ 支持自定义颜色和等待时间

**使用方法**:
```python
subtitle_mgr = SubtitleManager(self)
subtitle_mgr.show("字幕文本", duration=3.5, wait_after=1.0)
```

### 2. 3B1B 风格实现

**关键特性**:
- ✅ 字幕逐字/逐句显示（使用 `Write` 动画）
- ✅ 画面与字幕同步（在同一个 `self.play()` 中）
- ✅ 节奏自然（根据文本长度自动调整）
- ✅ 适当的停顿（`wait_after` 参数）

### 3. 视觉元素

**使用的 Manim 对象**:
- `Text`: 字幕和标签
- `Rectangle`: 图像和背景
- `Axes`: 坐标轴
- `Plot`: 函数曲线
- `Line`: 切线
- `Dot`: 点
- `IntegerMatrix`: Sobel 矩阵预览
- `VGroup`: 组合对象
- `BackgroundRectangle`: 字幕背景

---

## 使用方法

### 1. 快速预览（低质量）

```bash
cd "全流程代码"
manim -pql sobel_iterative_v01_scene0.py SobelUniverse
```

### 2. 高质量渲染

```bash
manim -pqh sobel_iterative_v01_scene0.py SobelUniverse
```

### 3. 只渲染 Scene 0（用于测试）

代码已经设置为只运行 Scene 0，可以直接渲染测试。

---

## 代码结构

```
sobel_iterative_v01_scene0.py
├── 全局配置
│   ├── 颜色语义池
│   ├── 字幕样式配置
│   └── LaTeX 模板配置
├── 字幕管理系统
│   ├── SubtitleManager 类
│   │   ├── create_subtitle()
│   │   ├── show()
│   │   └── clear()
│   └── 工具函数
│       ├── create_title()
│       └── calculate_text_duration()
└── 主场景类
    └── SobelUniverse
        ├── construct()
        └── setup_scene_0_intro()
            ├── Part 1: 开场问题
            ├── Part 2: 核心概念引入
            ├── Part 3: 主题预告
            ├── Part 4: 背景知识铺垫
            └── Part 5: 过渡
```

---

## 检查清单

在提交之前，请检查：

### 功能检查
- [ ] 字幕显示正常
- [ ] 动画流畅
- [ ] 所有文本可见（无遮挡）
- [ ] 颜色语义正确

### 技术检查
- [ ] 无语法错误
- [ ] 无运行时错误
- [ ] 渲染速度合理（低质量预览）
- [ ] 时长符合预期（75-90秒）

### 审美检查
- [ ] 字幕位置合理（不遮挡主要内容）
- [ ] 动画节奏自然
- [ ] 视觉元素对齐
- [ ] 颜色搭配协调

---

## 已知问题与注意事项

### 1. 中文字体
- 代码中尝试使用 "SimHei" 字体
- 如果系统没有该字体，会自动使用默认字体
- 建议：如果有中文字体问题，可以修改 `font` 参数

### 2. 字幕时长
- 字幕时长根据文本长度自动计算
- 可以通过 `duration` 参数手动调整
- 建议：如果感觉太快或太慢，可以调整 `base_speed`（在 `calculate_text_duration` 中）

### 3. 等待时间
- 每个字幕后都有 `wait_after` 时间（默认 0.8 秒）
- 可以根据需要调整
- 建议：重要概念可以增加等待时间（1.5-2秒）

---

## 下一步计划

### 第二阶段：Scene 1 - 连续与离散的对比
- 扩展 Scene 1
- 增加导数的直观理解
- 增加采样定理介绍
- 深化问题陈述

### 第三阶段：Scene 2 - 泰勒展开推导
- 扩展 Scene 2
- 增加泰勒公式的直观理解
- 详细的展开过程
- 误差分析

### 后续阶段...
- Scene 2.5: 数值方法对比
- Scene 3.5: 噪声的挑战
- Scene 3: Sobel 算子构造
- Scene 4: 3D 可视化应用
- Scene 4.5: 实际应用案例
- Scene 5: 总结与升华

---

## 反馈与改进

如果发现问题或需要改进，请记录：
1. **问题描述**
2. **重现步骤**
3. **预期行为**
4. **实际行为**
5. **建议改进**

---

**文档版本**: v1.0  
**最后更新**: 2024年12月  
**对应代码版本**: V01  
**维护者**: 开发团队

